<div class="container">
  <app-create-ticket (ticketCreated)="onTicketCreated()"></app-create-ticket>
  <div class="mt-4">
    <table class="table table-striped table-hover table-bordered text-center">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Tên</th>
          <th>Mô tả</th>
          <th>Thời gian assign</th>
          <th>Người assign được đầu tiên </th>
          <th>Người assign trước đó</th>
          <th>Người assign cuối cùng hiện tại</th>
          <th>Ảnh mô tả</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let ticket of displayedTickets">
          <td>{{ ticket.id }}</td>
          <td>{{ ticket.name }}</td>
          <td>{{ticket.description}}</td>
          <td [ngClass]="{'text-warning': !ticket.assignedAt}">
            {{ ticket.assignedAt ? (ticket.assignedAt | date: 'yyyy-MM-dd HH:mm:ss') : 'Ticket chưa assign ai' }}
          </td>
          <td>{{ ticket.firstAssginName }}</td>
          <td>{{ ticket.assignerName }}</td>
          <td>{{ ticket.assigneeName }}</td>
          <td>
            <img [src]="ticket.fileDescription || 'photo.png'" class="rounded mx-auto d-block" width="100" height="70">
          </td>
        </tr>
      </tbody>
    </table>

    <div class="d-flex justify-content-between align-items-center mt-3">
      <nz-pagination [nzPageIndex]="currentPage" [nzTotal]="tickets.length" [nzPageSize]="pageSize"
        (nzPageIndexChange)="onPageIndexChange($event)"></nz-pagination>
    </div>
  </div>
</div>